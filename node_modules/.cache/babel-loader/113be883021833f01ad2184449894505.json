{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _promiseQueue = require('promise-queue');\n\nvar _promiseQueue2 = _interopRequireDefault(_promiseQueue);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar PageTransition = function (_React$Component) {\n  _inherits(PageTransition, _React$Component);\n\n  _createClass(PageTransition, null, [{\n    key: 'compareChildren',\n    value: function compareChildren(prevChild, nextChild) {\n      if (prevChild && prevChild.props && prevChild.props['data-transition-id'] && nextChild.props && nextChild.props['data-transition-id']) {\n        return prevChild.props['data-transition-id'] === nextChild.props['data-transition-id'];\n      }\n\n      return prevChild === nextChild;\n    }\n  }]);\n\n  function PageTransition() {\n    var _ref;\n\n    _classCallCheck(this, PageTransition);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var _this = _possibleConstructorReturn(this, (_ref = PageTransition.__proto__ || Object.getPrototypeOf(PageTransition)).call.apply(_ref, [this].concat(args)));\n\n    if (_this.props.animateOnInit) {\n      _this.state = {\n        child1: null,\n        child2: null,\n        nextChild: 1\n      };\n    } else {\n      _this.state = {\n        child1: _this.props.children,\n        child2: null,\n        nextChild: 2\n      };\n    }\n\n    _this.transite = _this.transite.bind(_this);\n    _this.getRef = _this.getRef.bind(_this);\n    _this.queue = new _promiseQueue2.default(1, Infinity); // max concurrent 1, max queue Inf\n\n    return _this;\n  }\n\n  _createClass(PageTransition, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (!this.props.animateOnInit) {\n        var child = this.getRef('child1');\n\n        if (child) {\n          var dom = _reactDom2.default.findDOMNode(child);\n\n          child.onTransitionDidEnd && child.onTransitionDidEnd(this.props.data);\n          dom.classList.remove('transition-item');\n\n          if (this.hasTransitionAction()) {\n            dom.classList.remove('transition-' + this.props.transitionAction);\n          }\n        }\n      } else {\n        this.transite(this.props.children);\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      var transitNewChild = function transitNewChild() {\n        _this2.queue.add(function () {\n          return _this2.transite(nextProps.children);\n        });\n      };\n\n      var updateChild = function updateChild() {\n        var currentChild = _this2.state.nextChild === 1 ? 2 : 1;\n        _this2.state['child' + currentChild] = nextProps.children;\n\n        _this2.forceUpdate();\n      };\n\n      var isChildrenEqual = this.props.compareChildren || PageTransition.compareChildren;\n      isChildrenEqual(this.props.children, nextProps.children) ? updateChild() : transitNewChild();\n    }\n  }, {\n    key: 'getRef',\n    value: function getRef(ref) {\n      var child = this.refs[ref]; // Dirty way to check if the component is\n      // wrapped with react-redux Connect\n\n      if (child && child.getWrappedInstance) {\n        child = child.getWrappedInstance();\n      }\n\n      return child;\n    }\n  }, {\n    key: 'hasTransitionAction',\n    value: function hasTransitionAction() {\n      return this.props.transitionAction && this.props.transitionAction != '';\n    }\n  }, {\n    key: 'transite',\n    value: function transite(nextChild) {\n      var _this3 = this;\n\n      return new Promise(function (transiteDone, transiteFailed) {\n        // Render the new children\n        _this3.state['child' + _this3.state.nextChild] = nextChild;\n\n        _this3.forceUpdate(function () {\n          var prevChild = _this3.getRef('child' + (_this3.state.nextChild === 1 ? 2 : 1));\n\n          var newChild = _this3.getRef('child' + _this3.state.nextChild);\n\n          var prevChildDom = _reactDom2.default.findDOMNode(prevChild);\n\n          var newChildDom = _reactDom2.default.findDOMNode(newChild);\n\n          var timeout = 0; // Before add appear class\n\n          var willStart = function willStart() {\n            if (newChild.onTransitionWillStart) {\n              return newChild.onTransitionWillStart(_this3.props.data) || Promise.resolve();\n            }\n\n            if (prevChild && prevChild.onTransitionLeaveWillStart) {\n              return prevChild.onTransitionLeaveWillStart(_this3.props.data) || Promise.resolve();\n            }\n\n            return Promise.resolve();\n          }; // Add appear class and active class (or trigger manual start)\n\n\n          var start = function start() {\n            if (newChildDom.classList.contains('transition-item')) {\n              timeout = _this3.props.timeout;\n              newChildDom.classList.add('transition-appear');\n\n              if (_this3.hasTransitionAction()) {\n                newChildDom.classList.add('transition-' + _this3.props.transitionAction);\n              }\n\n              newChildDom.offsetHeight; // Trigger layout to make sure transition happen\n\n              if (newChild.transitionManuallyStart) {\n                return newChild.transitionManuallyStart(_this3.props.data, start) || Promise.resolve();\n              }\n\n              newChildDom.classList.add('transition-appear-active');\n            }\n\n            if (prevChildDom) {\n              prevChildDom.classList.add('transition-leave');\n              prevChildDom.classList.add('transition-item');\n\n              if (_this3.hasTransitionAction()) {\n                prevChildDom.classList.add('transition-' + _this3.props.transitionAction);\n              }\n\n              timeout = _this3.props.timeout;\n              prevChildDom.offsetHeight; // Trigger layout to make sure transition happen\n\n              if (prevChild.transitionLeaveManuallyStart) {\n                return prevChild.transitionLeaveManuallyStart(_this3.props.data, start) || Promise.resolve();\n              }\n\n              prevChildDom.classList.add('transition-leave-active');\n            }\n\n            return Promise.resolve();\n          }; // After add classes\n\n\n          var didStart = function didStart() {\n            if (newChild.onTransitionDidStart) {\n              return newChild.onTransitionDidStart(_this3.props.data) || Promise.resolve();\n            }\n\n            if (prevChild && prevChild.onTransitionLeaveDidStart) {\n              return prevChild.onTransitionLeaveDidStart(_this3.props.data) || Promise.resolve();\n            }\n\n            return Promise.resolve();\n          }; // Wait for transition\n\n\n          var waitForTransition = function waitForTransition() {\n            return new Promise(function (resolve) {\n              setTimeout(function () {\n                // Swap child and remove the old child\n                _this3.state.nextChild = _this3.state.nextChild === 1 ? 2 : 1;\n                _this3.state['child' + _this3.state.nextChild] = null;\n\n                _this3.forceUpdate(resolve);\n              }, timeout);\n            });\n          }; // Before remove classes\n\n\n          var willEnd = function willEnd() {\n            if (newChild.onTransitionWillEnd) {\n              return newChild.onTransitionWillEnd(_this3.props.data) || Promise.resolve();\n            }\n\n            if (prevChild && prevChild.onTransitionLeaveWillEnd) {\n              return prevChild.onTransitionLeaveWillEnd(_this3.props.data) || Promise.resolve();\n            }\n\n            return Promise.resolve();\n          }; // Remove appear and active class (or trigger manual end)\n\n\n          var end = function end() {\n            if (newChildDom.classList.contains('transition-item')) {\n              newChildDom.classList.remove('transition-appear');\n              newChildDom.classList.remove('transition-item');\n\n              if (newChild.transitionManuallyStop) {\n                return newChild.transitionManuallyStop(_this3.props.data) || Promise.resolve();\n              }\n\n              if (_this3.hasTransitionAction()) {\n                newChildDom.classList.remove('transition-' + _this3.props.transitionAction);\n              }\n\n              newChildDom.classList.remove('transition-appear-active');\n            }\n\n            if (prevChildDom && prevChildDom.classList.contains('transition-item')) {\n              prevChildDom.classList.remove('transition-leave');\n              prevChildDom.classList.remove('transition-item');\n\n              if (prevChild.transitionLeaveManuallyStop) {\n                return prevChild.transitionLeaveManuallyStop(_this3.props.data) || Promise.resolve();\n              }\n\n              if (_this3.hasTransitionAction()) {\n                prevChildDom.classList.remove('transition-' + _this3.props.transitionAction);\n              }\n\n              prevChildDom.classList.remove('transition-leave-active');\n            }\n\n            return Promise.resolve();\n          }; // After remove classes\n\n\n          var didEnd = function didEnd() {\n            if (newChild.onTransitionDidEnd) {\n              return newChild.onTransitionDidEnd(_this3.props.data) || Promise.resolve();\n            }\n\n            if (prevChild && prevChild.onTransitionLeaveDidEnd) {\n              return prevChild.onTransitionLeaveDidEnd(_this3.props.data) || Promise.resolve();\n            }\n\n            return Promise.resolve();\n          };\n\n          Promise.resolve().then(willStart).then(start).then(didStart).then(waitForTransition).then(willEnd).then(end).then(didEnd).then(function () {\n            _this3.props.onLoad && _this3.props.onLoad();\n            transiteDone();\n          }).catch(transiteFailed);\n        });\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement('div', {\n        className: 'transition-wrapper'\n      }, _react2.default.Children.map(this.state.child1, function (element) {\n        return _react2.default.cloneElement(element, {\n          ref: 'child1'\n        });\n      }), _react2.default.Children.map(this.state.child2, function (element) {\n        return _react2.default.cloneElement(element, {\n          ref: 'child2'\n        });\n      }));\n    }\n  }]);\n\n  return PageTransition;\n}(_react2.default.Component);\n\nexports.default = PageTransition;\nPageTransition.propTypes = {\n  'data-transition-id': _propTypes2.default.string,\n  data: _propTypes2.default.object,\n  animateOnInit: _propTypes2.default.bool,\n  timeout: _propTypes2.default.number,\n  compareChildren: _propTypes2.default.func,\n  transitionAction: _propTypes2.default.string\n};\nPageTransition.defaultProps = {\n  timeout: 500\n};","map":{"version":3,"sources":["/Users/serenaantonetti/portfolio-2019/node_modules/react-router-page-transition/lib/PageTransition.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_react","require","_react2","_interopRequireDefault","_reactDom","_reactDom2","_propTypes","_propTypes2","_promiseQueue","_promiseQueue2","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","PageTransition","_React$Component","compareChildren","prevChild","nextChild","_ref","_len","arguments","args","Array","_key","_this","getPrototypeOf","apply","concat","animateOnInit","state","child1","child2","children","transite","bind","getRef","queue","Infinity","componentDidMount","child","dom","findDOMNode","onTransitionDidEnd","data","classList","remove","hasTransitionAction","transitionAction","componentWillReceiveProps","nextProps","_this2","transitNewChild","add","updateChild","currentChild","forceUpdate","isChildrenEqual","ref","refs","getWrappedInstance","_this3","Promise","transiteDone","transiteFailed","newChild","prevChildDom","newChildDom","timeout","willStart","onTransitionWillStart","resolve","onTransitionLeaveWillStart","start","contains","offsetHeight","transitionManuallyStart","transitionLeaveManuallyStart","didStart","onTransitionDidStart","onTransitionLeaveDidStart","waitForTransition","setTimeout","willEnd","onTransitionWillEnd","onTransitionLeaveWillEnd","end","transitionManuallyStop","transitionLeaveManuallyStop","didEnd","onTransitionLeaveDidEnd","then","onLoad","catch","render","createElement","className","Children","map","element","cloneElement","Component","propTypes","string","object","bool","number","func","defaultProps"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _promiseQueue = require('promise-queue');\n\nvar _promiseQueue2 = _interopRequireDefault(_promiseQueue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PageTransition = function (_React$Component) {\n  _inherits(PageTransition, _React$Component);\n\n  _createClass(PageTransition, null, [{\n    key: 'compareChildren',\n    value: function compareChildren(prevChild, nextChild) {\n      if (prevChild && prevChild.props && prevChild.props['data-transition-id'] && nextChild.props && nextChild.props['data-transition-id']) {\n        return prevChild.props['data-transition-id'] === nextChild.props['data-transition-id'];\n      }\n      return prevChild === nextChild;\n    }\n  }]);\n\n  function PageTransition() {\n    var _ref;\n\n    _classCallCheck(this, PageTransition);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var _this = _possibleConstructorReturn(this, (_ref = PageTransition.__proto__ || Object.getPrototypeOf(PageTransition)).call.apply(_ref, [this].concat(args)));\n\n    if (_this.props.animateOnInit) {\n      _this.state = {\n        child1: null,\n        child2: null,\n        nextChild: 1\n      };\n    } else {\n      _this.state = {\n        child1: _this.props.children,\n        child2: null,\n        nextChild: 2\n      };\n    }\n    _this.transite = _this.transite.bind(_this);\n    _this.getRef = _this.getRef.bind(_this);\n\n    _this.queue = new _promiseQueue2.default(1, Infinity); // max concurrent 1, max queue Inf\n    return _this;\n  }\n\n  _createClass(PageTransition, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (!this.props.animateOnInit) {\n        var child = this.getRef('child1');\n        if (child) {\n          var dom = _reactDom2.default.findDOMNode(child);\n          child.onTransitionDidEnd && child.onTransitionDidEnd(this.props.data);\n          dom.classList.remove('transition-item');\n          if (this.hasTransitionAction()) {\n            dom.classList.remove('transition-' + this.props.transitionAction);\n          }\n        }\n      } else {\n        this.transite(this.props.children);\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      var transitNewChild = function transitNewChild() {\n        _this2.queue.add(function () {\n          return _this2.transite(nextProps.children);\n        });\n      };\n      var updateChild = function updateChild() {\n        var currentChild = _this2.state.nextChild === 1 ? 2 : 1;\n        _this2.state['child' + currentChild] = nextProps.children;\n        _this2.forceUpdate();\n      };\n\n      var isChildrenEqual = this.props.compareChildren || PageTransition.compareChildren;\n      isChildrenEqual(this.props.children, nextProps.children) ? updateChild() : transitNewChild();\n    }\n  }, {\n    key: 'getRef',\n    value: function getRef(ref) {\n      var child = this.refs[ref];\n      // Dirty way to check if the component is\n      // wrapped with react-redux Connect\n      if (child && child.getWrappedInstance) {\n        child = child.getWrappedInstance();\n      }\n      return child;\n    }\n  }, {\n    key: 'hasTransitionAction',\n    value: function hasTransitionAction() {\n      return this.props.transitionAction && this.props.transitionAction != '';\n    }\n  }, {\n    key: 'transite',\n    value: function transite(nextChild) {\n      var _this3 = this;\n\n      return new Promise(function (transiteDone, transiteFailed) {\n        // Render the new children\n        _this3.state['child' + _this3.state.nextChild] = nextChild;\n        _this3.forceUpdate(function () {\n          var prevChild = _this3.getRef('child' + (_this3.state.nextChild === 1 ? 2 : 1));\n          var newChild = _this3.getRef('child' + _this3.state.nextChild);\n          var prevChildDom = _reactDom2.default.findDOMNode(prevChild);\n          var newChildDom = _reactDom2.default.findDOMNode(newChild);\n          var timeout = 0;\n\n          // Before add appear class\n          var willStart = function willStart() {\n            if (newChild.onTransitionWillStart) {\n              return newChild.onTransitionWillStart(_this3.props.data) || Promise.resolve();\n            }\n            if (prevChild && prevChild.onTransitionLeaveWillStart) {\n              return prevChild.onTransitionLeaveWillStart(_this3.props.data) || Promise.resolve();\n            }\n            return Promise.resolve();\n          };\n\n          // Add appear class and active class (or trigger manual start)\n          var start = function start() {\n            if (newChildDom.classList.contains('transition-item')) {\n              timeout = _this3.props.timeout;\n              newChildDom.classList.add('transition-appear');\n              if (_this3.hasTransitionAction()) {\n                newChildDom.classList.add('transition-' + _this3.props.transitionAction);\n              }\n              newChildDom.offsetHeight; // Trigger layout to make sure transition happen\n              if (newChild.transitionManuallyStart) {\n                return newChild.transitionManuallyStart(_this3.props.data, start) || Promise.resolve();\n              }\n              newChildDom.classList.add('transition-appear-active');\n            }\n            if (prevChildDom) {\n              prevChildDom.classList.add('transition-leave');\n              prevChildDom.classList.add('transition-item');\n              if (_this3.hasTransitionAction()) {\n                prevChildDom.classList.add('transition-' + _this3.props.transitionAction);\n              }\n              timeout = _this3.props.timeout;\n              prevChildDom.offsetHeight; // Trigger layout to make sure transition happen\n              if (prevChild.transitionLeaveManuallyStart) {\n                return prevChild.transitionLeaveManuallyStart(_this3.props.data, start) || Promise.resolve();\n              }\n              prevChildDom.classList.add('transition-leave-active');\n            }\n            return Promise.resolve();\n          };\n\n          // After add classes\n          var didStart = function didStart() {\n            if (newChild.onTransitionDidStart) {\n              return newChild.onTransitionDidStart(_this3.props.data) || Promise.resolve();\n            }\n            if (prevChild && prevChild.onTransitionLeaveDidStart) {\n              return prevChild.onTransitionLeaveDidStart(_this3.props.data) || Promise.resolve();\n            }\n            return Promise.resolve();\n          };\n\n          // Wait for transition\n          var waitForTransition = function waitForTransition() {\n            return new Promise(function (resolve) {\n              setTimeout(function () {\n                // Swap child and remove the old child\n                _this3.state.nextChild = _this3.state.nextChild === 1 ? 2 : 1;\n                _this3.state['child' + _this3.state.nextChild] = null;\n                _this3.forceUpdate(resolve);\n              }, timeout);\n            });\n          };\n\n          // Before remove classes\n          var willEnd = function willEnd() {\n            if (newChild.onTransitionWillEnd) {\n              return newChild.onTransitionWillEnd(_this3.props.data) || Promise.resolve();\n            }\n            if (prevChild && prevChild.onTransitionLeaveWillEnd) {\n              return prevChild.onTransitionLeaveWillEnd(_this3.props.data) || Promise.resolve();\n            }\n            return Promise.resolve();\n          };\n\n          // Remove appear and active class (or trigger manual end)\n          var end = function end() {\n            if (newChildDom.classList.contains('transition-item')) {\n              newChildDom.classList.remove('transition-appear');\n              newChildDom.classList.remove('transition-item');\n\n              if (newChild.transitionManuallyStop) {\n                return newChild.transitionManuallyStop(_this3.props.data) || Promise.resolve();\n              }\n              if (_this3.hasTransitionAction()) {\n                newChildDom.classList.remove('transition-' + _this3.props.transitionAction);\n              }\n              newChildDom.classList.remove('transition-appear-active');\n            }\n            if (prevChildDom && prevChildDom.classList.contains('transition-item')) {\n              prevChildDom.classList.remove('transition-leave');\n              prevChildDom.classList.remove('transition-item');\n\n              if (prevChild.transitionLeaveManuallyStop) {\n                return prevChild.transitionLeaveManuallyStop(_this3.props.data) || Promise.resolve();\n              }\n              if (_this3.hasTransitionAction()) {\n                prevChildDom.classList.remove('transition-' + _this3.props.transitionAction);\n              }\n              prevChildDom.classList.remove('transition-leave-active');\n            }\n            return Promise.resolve();\n          };\n\n          // After remove classes\n          var didEnd = function didEnd() {\n            if (newChild.onTransitionDidEnd) {\n              return newChild.onTransitionDidEnd(_this3.props.data) || Promise.resolve();\n            }\n            if (prevChild && prevChild.onTransitionLeaveDidEnd) {\n              return prevChild.onTransitionLeaveDidEnd(_this3.props.data) || Promise.resolve();\n            }\n            return Promise.resolve();\n          };\n\n          Promise.resolve().then(willStart).then(start).then(didStart).then(waitForTransition).then(willEnd).then(end).then(didEnd).then(function () {\n            _this3.props.onLoad && _this3.props.onLoad();\n            transiteDone();\n          }).catch(transiteFailed);\n        });\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(\n        'div',\n        { className: 'transition-wrapper' },\n        _react2.default.Children.map(this.state.child1, function (element) {\n          return _react2.default.cloneElement(element, { ref: 'child1' });\n        }),\n        _react2.default.Children.map(this.state.child2, function (element) {\n          return _react2.default.cloneElement(element, { ref: 'child2' });\n        })\n      );\n    }\n  }]);\n\n  return PageTransition;\n}(_react2.default.Component);\n\nexports.default = PageTransition;\n\n\nPageTransition.propTypes = {\n  'data-transition-id': _propTypes2.default.string,\n  data: _propTypes2.default.object,\n  animateOnInit: _propTypes2.default.bool,\n  timeout: _propTypes2.default.number,\n  compareChildren: _propTypes2.default.func,\n  transitionAction: _propTypes2.default.string\n};\n\nPageTransition.defaultProps = {\n  timeout: 500\n};"]},"metadata":{},"sourceType":"script"}